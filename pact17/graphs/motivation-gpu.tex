\documentclass{standalone}

\usepackage{siunitx}
\usepackage{tikz} % To generate the plot from csv
\usepackage{pgfplots}

\input{barcolors}

\pgfplotsset{compat=newest} % Allows to place the legend below plot
\usepgfplotslibrary{units} % Allows to enter the units nicely

\begin{document}

\begin{tikzpicture}[scale=0.5]
    \pgfplotstableread{
X Class	CPU+GPU	onlyGPU	CPU+GPUD onlyGPUD
1 Qg1 1 1.129434574 1.335560111 1.60801150
2 Qg2 1 1.115271743 1.397269622 1.58784743
3 Qg3 1 1.121379934 1.261746906 1.59654385
4 Qg4 1 1.063903371 1.453763714 1.56497849
5 Qg5 1 1.062355147 1.383987574 1.53037160
6 Qg6 1 1.060854061 1.459482093 1.56049302
7 Qg7 1 1.075211657 1.560923483 1.73459211
8 Qg8 1 1.085249389 1.548454891 1.75078555
9 Qg 1 1.014779742 0.9972502853 1.010956549
10 Qg10 1 1.021773539 1.004192917 1.01792399
11 Qg11 1 1.072552573 0.9576439767 1.0276429
12 Qg12 1 1.036775063 0.9941809374 0.9997797
13 Qg13 1 1.08493824 1.148042467 1.179902852
14 GEO 1 1.072104058 1.250540224 1.36611076
    }\datatable

    \begin{axis}[
        ylabel style={}, ylabel = ANTT Improvement,
        ybar=1pt,
        bar width=5.5pt,
        xlabel=Workloads,
        xticklabels from table={\datatable}{X},
        xtick=data,
        x tick label style={},
        xticklabels={Qg1, Qg2, Qg3, Qg4, Qg5, Qg6, Qg7, Qg8, Qg9, Qg10, Qg11, Qg12, Qg13, GEO},
        x=30pt,
        ymin=0,
        ymax=2,
        axis x line*=left,
        axis y line*=left,
        %enlarge x limits=0.2,
        %after end axis/.code={\draw ({rel axis cs:0,0}|-{axis cs:0,0}) -- ({rel axis cs:1,0}|-{axis cs:0,0});},
        after end axis/.code={\draw [red, dashed] ({rel axis cs:0,1}|-{axis cs:0,1}) -- ({rel axis cs:1,1}|-{axis cs:0,1});},
        legend image code/.code={%
                    \draw[#1, draw=none] (0cm,-0.1cm) rectangle (0.4cm,0.2cm);
        },  
        legend style={
             text depth=0pt,
             legend cell align=left,
             at={(0.3, -0.2)},
             font=\tiny,
             anchor=north west,
             legend columns=4,
             % default spacing:
             column sep=0.1cm,
             % The text "Legend:"
             /tikz/column 2/.style={column sep=1pt},
             % the space between legend image and text:
             /tikz/every odd column/.append style={column sep=0cm},
        }
       ]

        \addplot [bar1] table[x=X,y=CPU+GPU] {\datatable};
        \addplot [bar2] table[x=X,y=onlyGPU] {\datatable};
        \addplot [bar3] table[x=X,y=CPU+GPUD] {\datatable};
        \addplot [bar4] table[x=X,y=onlyGPUD] {\datatable};

        \addlegendentry{\footnotesize{CPU+GPU}}
        \addlegendentry{\footnotesize{onlyCPU}}
        \addlegendentry{\footnotesize{CPU+GPU D$\$$}}
        \addlegendentry{\footnotesize{onlyCPU D$\$$}}

    \end{axis}
\end{tikzpicture}
\end{document}
